(function(t){function e(e){for(var s,r,l=e[0],o=e[1],c=e[2],p=0,d=[];p<l.length;p++)r=l[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/SpotiFork/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.$store.state.token?t._e():a("SectionHero"),t.$store.state.token?a("div",[a("Navbar"),a("SectionPlaylists"),t.$store.state.activePlaylist?a("SectionPlaylistEdit"):t._e()],1):t._e(),a("LoadingScreen"),a("AuthHandler"),a("Alerts")],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero is-warning is-fullheight"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("SpotiFork")]),a("h2",{staticClass:"subtitle"},[t._v("A client-side web app to fork multiple Spotify playlists to one!")]),a("a",{staticClass:"button is-success",attrs:{href:t.AUTH_URL}},[t._v("Login to get started")])])])])},l=[],o=(a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("d9ca")),c=a.n(o),u=["playlist-read-private","playlist-modify-private","playlist-modify-public"],p=new c.a({clientId:"61f6168aed9743a498f1daccc502d0e2",redirectUri:"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname)}),d=new URL(p.createAuthorizeURL(u,""));d.searchParams.set("response_type","token");var y,f,m={data:function(){return{api:p,AUTH_URL:d.href}}},v={name:"SectionHero",mixins:[m]},g=v,h=a("2877"),b=Object(h["a"])(g,r,l,!1,null,null,null),k=b.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},P=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar"},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",attrs:{href:"#"}},[a("b",[t._v("SpotiFork")])])])])}],_={name:"Navbar"},w=_,O=Object(h["a"])(w,S,P,!1,null,null,null),C=O.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[t._m(0),a("Table",{staticClass:"is-fullwidth",attrs:{fields:t.fields,items:t.trackedPlaylists},scopedSlots:t._u([{key:"image",fn:function(t){return[a("img",{staticClass:"image",attrs:{src:t.item.image}})]}},{key:"action",fn:function(e){return[a("button",{staticClass:"button is-primary",on:{click:function(a){return t.$store.commit("setState",{key:"activePlaylist",value:e.itemIndex})}}},[t._v("Edit")])]}}])})],1),a("div",{staticClass:"column"},[a("div",{staticClass:"level"},[a("h2",{staticClass:"title"},[t._v("Your Playlists")]),a("button",{staticClass:"button is-primary",on:{click:function(e){return t.$store.dispatch("refreshUserPlaylists",t.api)}}},[t._v("Refresh")])]),a("Table",{staticClass:"is-fullwidth",attrs:{fields:t.fields,items:t.ownedPlaylists},scopedSlots:t._u([{key:"image",fn:function(t){return[a("img",{staticClass:"image",attrs:{src:t.item.image,alt:"Playlist Cover Image"}})]}},{key:"action",fn:function(e){return[a("button",{staticClass:"button is-primary",on:{click:function(a){return t.$store.dispatch("importPlaylist",{api:t.api,playlistID:e.itemIndex})}}},[t._v("Import")])]}}])})],1)])])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level"},[a("h2",{staticClass:"title"},[t._v("Tracked Playlists")]),a("span")])}],j=a("e587"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table"},[a("thead",[a("tr",t._l(t.fields,(function(e,s){return a("th",{key:s},[t._v(t._s(e))])})),0)]),a("tbody",t._l(t.items,(function(e,s){return a("tr",{key:s},t._l(t.fields,(function(i,n){return a("th",{key:n},[t._t(n,[t._v(t._s(e[n]))],{item:e,itemIndex:s})],2)})),0)})),0)])},T=[],I={name:"Table",props:["fields","items"]},R=I,A=Object(h["a"])(R,L,T,!1,null,null,null),E=A.exports,M={name:"SectionPlaylists",mixins:[m],data:function(){return{fields:{image:"Cover Image",name:"Name",action:"Action"},trackedPlaylists:{},ownedPlaylists:{}}},methods:{splitPlaylists:function(t){var e={},a={};for(var s in t)(t[s].tracked?e:a)[s]=t[s];return[e,a]}},created:function(){var t=this,e=this.splitPlaylists(this.$store.state.playlists),a=Object(j["a"])(e,2);this.trackedPlaylists=a[0],this.ownedPlaylists=a[1],this.$store.watch((function(t){return t.playlists}),(function(e){var a=t.splitPlaylists(e),s=Object(j["a"])(a,2);t.trackedPlaylists=s[0],t.ownedPlaylists=s[1]}),{deep:!0})},components:{Table:E}},N=M,U=Object(h["a"])(N,$,x,!1,null,null,null),F=U.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{ref:"sectionTop",staticClass:"section"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("div",{staticClass:"level"},[a("h3",{staticClass:"title"},[t._v("Tracks")]),a("button",{staticClass:"button is-primary",on:{click:function(e){return t.$store.dispatch("importPlaylist",{playlistID:t.$store.state.activePlaylist,api:t.api})}}},[t._v("Refresh Playlist")])]),a("Table",{staticClass:"is-fullwidth",attrs:{fields:t.tracksFields,items:t.trackPool[0]},scopedSlots:t._u([{key:"action",fn:function(e){return[t.trackPool[1]>e.itemIndex?a("div",{staticClass:"buttons"},[a("button",{staticClass:"button is-success",on:{click:function(a){return t.$store.dispatch("addToPlaylist",{track:t.trackPool[0][e.itemIndex],api:t.api})}}},[t._v("âœ“")]),a("button",{staticClass:"button is-warning",on:{click:function(a){return t.$store.dispatch("addToBlacklist",t.trackPool[0][e.itemIndex].id)}}},[t._v("X")])]):t._e()]}}])})],1),a("div",{staticClass:"column"},[t._m(0),a("Table",{staticClass:"is-fullwidth",attrs:{fields:t.sourcesFields,items:t.sources},scopedSlots:t._u([{key:"image",fn:function(t){return[a("img",{staticClass:"image",attrs:{src:t.item.image}})]}},{key:"action",fn:function(e){return[a("div",{staticClass:"buttons"},[a("button",{staticClass:"button is-primary",on:{click:function(a){return t.$store.dispatch("importSourcePlaylist",{api:t.api,playlistID:e.itemIndex})}}},[t._v("Refresh")]),a("button",{staticClass:"button is-warning",on:{click:function(a){return t.$store.dispatch("removeSourcePlaylist",e.itemIndex)}}},[t._v("Remove")])])]}}])}),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sourcePlaylistURL,expression:"sourcePlaylistURL"}],staticClass:"input",attrs:{type:"text",placeholder:"Playlist Link"},domProps:{value:t.sourcePlaylistURL},on:{input:function(e){e.target.composing||(t.sourcePlaylistURL=e.target.value)}}})]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-info",on:{click:t.addSourcePlaylist}},[t._v("Add Source Playlist")])])])],1)])])},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level"},[a("h2",{staticClass:"title"},[t._v("Source Playlists")]),a("span")])}],H=(a("4de4"),a("0481"),a("caad"),a("d81d"),a("13d5"),a("45fc"),a("4069"),a("b64b"),a("ac1f"),a("2532"),a("1276"),a("284c")),K={name:"SectionPlaylistEdit",mixins:[m],components:{Table:E},data:function(){return{tracksFields:{name:"Name",action:"Action"},sourcesFields:{image:"Image",name:"Name",action:"Action"},sourcePlaylistURL:""}},computed:{activePlaylist:function(){return this.$store.state.playlists[this.$store.state.activePlaylist]||{}},sources:function(){var t=this;return this.$store.state.sourcePlaylists,this.activePlaylist.sources.reduce((function(e,a){return e[a]=t.$store.state.sourcePlaylists[a],e}),{})},trackPool:function(){var t=this,e=Object.keys(this.sources).map((function(e){return t.sources[e].tracks.filter((function(e){return!t.activePlaylist.tracks.some((function(t){return t.id==e.id}))&&!t.activePlaylist.blacklist.includes(e.id)}))})).flat();return[[].concat(Object(H["a"])(e),Object(H["a"])(this.activePlaylist.tracks)),e.length]}},methods:{addSourcePlaylist:function(){var t=new URL(this.sourcePlaylistURL).pathname.split("/"),e=Object(j["a"])(t,3),a=e[1],s=e[2];"playlist"==a&&s?this.$store.dispatch("addSourcePlaylist",{api:this.api,playlistID:s}):this.$store.commit("pushToState",{key:"alerts",value:{message:"Please enter a valid Spotify playlist link",type:"danger"}})}},mounted:function(){this.$refs.sectionTop.scrollIntoView({behavior:"smooth"})},updated:function(){this.$refs.sectionTop.scrollIntoView({behavior:"smooth"})}},B=K,z=Object(h["a"])(B,D,J,!1,null,null,null),V=z.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.loadingScreenMessage,expression:"$store.state.loadingScreenMessage"}],staticClass:"loading-screen"},[a("h3",{staticClass:"title is-3"},[t._v(t._s(t.$store.state.loadingScreenMessage))])])},X=[],Y={name:"LoadingScreen"},G=Y,Q=Object(h["a"])(G,q,X,!1,null,null,null),W=Q.exports,Z=(a("4160"),a("841c"),a("159b"),{name:"AuthHandler",mixins:[m],mounted:function(){var t=this;if(this.$store.state.token)return this.api.setAccessToken(this.$store.state.token),this.$store.commit("setState",{key:"loadingScreenMessage",value:"Checking if token is still valid..."}),void this.api.getMe().then((function(e){return t.$store.commit("setState",{key:"loadingScreenMessage",value:""})}),(function(e){t.$store.commit("setState",{key:"token",value:"",updateLocalStorage:!0}),t.$store.commit("setState",{key:"loadingScreenMessage",value:""})}));var e=new URLSearchParams(window.location.search);if(e.has("error"))this.$store.commit("pushToState",{key:"alerts",value:{message:"Authorization Failed. Reason: ".concat(e.get("error")),type:"danger"}});else{var a={};window.location.hash.substring(1).split("&").forEach((function(t){var e=t.split("="),s=Object(j["a"])(e,2),i=s[0],n=s[1];a[i]=n})),a.hasOwnProperty("access_token")&&(window.location.hash="",this.$store.commit("setState",{key:"token",value:a["access_token"],updateLocalStorage:!0}),this.api.setAccessToken(a["access_token"]),this.$store.dispatch("refreshUserPlaylists",this.api))}},render:function(){return null}}),tt=Z,et=Object(h["a"])(tt,y,f,!1,null,null,null),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notifications-box"},t._l(t.$store.state.alerts,(function(e,s){return a("div",{key:s,class:"notification is-"+e.type},[a("button",{staticClass:"delete",on:{click:function(){return t.$store.commit("removeFromState",{key:"alerts",index:s})}}}),a("p",[t._v(t._s(e.message))])])})),0)},it=[],nt={name:"Alerts"},rt=nt,lt=Object(h["a"])(rt,st,it,!1,null,null,null),ot=lt.exports,ct={name:"app",components:{LoadingScreen:W,AuthHandler:at,Navbar:C,SectionHero:k,SectionPlaylists:F,SectionPlaylistEdit:V,Alerts:ot}},ut=ct,pt=Object(h["a"])(ut,i,n,!1,null,null,null),dt=pt.exports,yt=(a("a4d3"),a("a434"),a("b0c0"),a("e439"),a("dbb4"),a("6062"),a("96cf"),a("89ba")),ft=a("2fa7"),mt=a("2f62");function vt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function gt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?vt(a,!0).forEach((function(e){Object(ft["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}s["a"].use(mt["a"]);var ht=new mt["a"].Store({state:{loadingScreenMessage:"",token:JSON.parse(localStorage["token"]||"{}"),alerts:[],playlists:JSON.parse(localStorage["playlists"]||"{}"),sourcePlaylists:JSON.parse(localStorage["sourcePlaylists"]||"{}"),activePlaylist:""},mutations:{setState:function(t,e){var a=e.key,s=e.value,i=e.updateLocalStorage,n=void 0!==i&&i;t[a]=s,n&&(localStorage[a]=JSON.stringify(s))},setStateProperty:function(t,e){var a=e.key,s=e.propertyKey,i=e.value,n=e.updateLocalStorage,r=void 0!==n&&n;t[a][s]=i,r&&(localStorage[a]=JSON.stringify(t[a]))},delStateProperty:function(t,e){var a=e.key,s=e.propertyKey,i=e.updateLocalStorage,n=void 0!==i&&i;delete t[a][s],n&&(localStorage[a]=JSON.stringify(t[a]))},pushToState:function(t,e){var a=e.key,s=e.value,i=e.updateLocalStorage,n=void 0!==i&&i;t[a].push(s),n&&(localStorage[a]=JSON.stringify(s))},removeFromState:function(t,e){var a=e.key,s=e.index,i=e.updateLocalStorage,n=void 0!==i&&i;t[a].splice(s,1),n&&(localStorage[a]=JSON.stringify(value))}},actions:{refreshUserPlaylists:function(t,e){var a=t.state,s=t.commit;s("setState",{key:"loadingScreenMessage",value:"Refresing Playlists..."}),e.getUserPlaylists({fields:"items(id, name, images)",limit:50}).then((function(t){t=t.body.items.map((function(t){return{id:t.id,name:t.name,image:t.images.length?t.images[0].url:""}})),s("setState",{key:"playlists",value:t.reduce((function(t,e){return t[e.id]=gt({},a.playlists[e.id],{name:e.name,image:e.image,sources:[],blacklist:[]}),t}),{}),updateLocalStorage:!0}),s("setState",{key:"loadingScreenMessage",value:""})}),(function(t){s("pushToState",{key:"alerts",value:{message:t.message,type:"danger"}}),s("setState",{key:"loadingScreenMessage",value:""})}))},importPlaylist:function(){var t=Object(yt["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,n,r,l,o,c,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.state,i=e.commit,n=a.api,r=a.playlistID,i("setState",{key:"loadingScreenMessage",value:"Importing Playlist..."}),l=0,o={tracks:[],tracked:!0};case 4:if(!(l+1)){t.next=13;break}return t.next=7,n.getPlaylistTracks(r,{offset:l,fields:"items(track(id, name)), next"});case 7:u=t.sent,p=u.body,(c=o.tracks).push.apply(c,Object(H["a"])(p.items.map((function(t){return{id:t.track.id,name:t.track.name}})))),l+=p.next?100:void 0,t.next=4;break;case 13:i("setStateProperty",{key:"playlists",propertyKey:r,value:gt({},s.playlists[r],{},o),updateLocalStorage:!0}),i("setState",{key:"loadingScreenMessage",value:""});case 15:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}(),importSourcePlaylist:function(){var t=Object(yt["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,n,r,l,o,c,u,p,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.state,i=e.commit,n=a.api,r=a.playlistID,i("setState",{key:"loadingScreenMessage",value:"Importing Source Playlist..."}),t.next=5,n.getPlaylist(r,{fields:"name, images"});case 5:l=t.sent.body,o=0,c={name:l.name,image:l.images.length?l.images[0].url:"",tracks:[]};case 7:if(!(o+1)){t.next=16;break}return t.next=10,n.getPlaylistTracks(r,{offset:o,fields:"items(track(id, name)), next"});case 10:p=t.sent,d=p.body,(u=c.tracks).push.apply(u,Object(H["a"])(d.items.map((function(t){return{id:t.track.id,name:t.track.name}})))),o+=d.next?100:void 0,t.next=7;break;case 16:i("setStateProperty",{key:"sourcePlaylists",propertyKey:r,value:gt({},s.sourcePlaylists[r],{},c),updateLocalStorage:!0}),i("setState",{key:"loadingScreenMessage",value:""});case 18:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}(),addSourcePlaylist:function(t,e){var a=t.state,s=t.dispatch,i=t.commit,n=e.api,r=e.playlistID;s("importSourcePlaylist",{api:n,playlistID:r}).then((function(){i("setStateProperty",{key:"playlists",propertyKey:a.activePlaylist,value:gt({},a.playlists[a.activePlaylist],{sources:Object(H["a"])(new Set([r].concat(Object(H["a"])(a.playlists[a.activePlaylist].sources))))}),updateLocalStorage:!0})}))},removeSourcePlaylist:function(t,e){var a=t.state,s=t.commit;s("setStateProperty",{key:"playlists",propertyKey:a.activePlaylist,value:gt({},a.playlists[a.activePlaylist],{sources:a.playlists[a.activePlaylist].sources.filter((function(t){return t!==e}))}),updateLocalStorage:!0})},addToBlacklist:function(t,e){var a=t.state,s=t.commit;s("setStateProperty",{key:"playlists",propertyKey:a.activePlaylist,value:gt({},a.playlists[a.activePlaylist],{blacklist:[].concat(Object(H["a"])(a.playlists[a.activePlaylist].blacklist),[e])}),updateLocalStorage:!0})},addToPlaylist:function(t,e){var a=t.state,s=t.commit,i=e.track,n=e.api;n.addTracksToPlaylist(a.activePlaylist,["spotify:track:".concat(i.id)]),s("setStateProperty",{key:"playlists",propertyKey:a.activePlaylist,value:gt({},a.playlists[a.activePlaylist],{tracks:[].concat(Object(H["a"])(a.playlists[a.activePlaylist].tracks),[i])}),updateLocalStorage:!0})}}}),bt=a("9483");Object(bt["a"])("".concat("/SpotiFork/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});a("944d");s["a"].config.productionTip=!1,new s["a"]({store:ht,render:function(t){return t(dt)}}).$mount("#app")},"944d":function(t,e,a){}});
//# sourceMappingURL=app.31625d2b.js.map